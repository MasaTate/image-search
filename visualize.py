from turtle import color
import matplotlib.pyplot as plt
import numpy as np

plus = {'cellphone': 0.0125, 'ibis': 0.0125, 'crayfish': 0.005, 'chandelier': 0.0225, 'saxophone': 0.017499999999999998, 'barrel': 0.015, 'dalmatian': 0.01, 'stegosaurus': 0.0025, 'water_lilly': 0.0225, 'crab': 0.0125, 'wrench': 0.0375, 'joshua_tree': 0.01, 'accordion': 0.0325, 'mayfly': 0.015, 'nautilus': 0.017499999999999998, 'menorah': 0.08, 'mandolin': 0.0025, 'scorpion': 0.0225, 'scissors': 0.0075, 'gerenuk': 0.01, 'flamingo_head': 0.0075, 'airplanes': 0.125, 'inline_skate': 0.0025, 'butterfly': 0.025, 'garfield': 0.052500000000000005, 'strawberry': 0.01, 'panda': 0.0375, 'windsor_chair': 0.017499999999999998, 'starfish': 0.0225, 'revolver': 0.017499999999999998, 'dollar_bill': 0.015, 'okapi': 0.015, 'hedgehog': 0.02, 'elephant': 0.0075, 'sunflower': 0.02, 'lobster': 0.01, 'binocular': 0.005, 'cannon': 0.0025, 'grand_piano': 0.04, 'snoopy': 0.0625, 'rhino': 0.005, 'emu': 0.01, 'cougar_body': 0.01, 'pyramid': 0.017499999999999998, 'cougar_face': 0.0075, 'beaver': 0.015, 'kangaroo': 0.0025, 'crocodile': 0.0025, 'pizza': 0.06999999999999999, 'platypus': 0.0, 'laptop': 0.0125, 'brain': 0.0925, 'stop_sign': 0.08499999999999999, 'octopus': 0.05500000000000001, 'wheelchair': 0.034999999999999996, 'Motorbikes': 0.05500000000000001, 'tick': 0.034999999999999996, 'pagoda': 0.0125, 'lotus': 0.01, 'buddha': 0.0125, 'dragonfly': 0.025, 'anchor': 0.0325, 'rooster': 0.025, 'minaret': 0.017499999999999998, 'hawksbill': 0.0125, 'ferry': 0.005, 'dolphin': 0.0125, 'chair': 0.01, 'ketch': 0.0075, 'euphonium': 0.0075, 'bonsai': 0.0325, 'llama': 0.0125, 'soccer_ball': 0.2, 'cup': 0.0075, 'ant': 0.005, 'ewer': 0.01, 'crocodile_head': 0.01, 'trilobite': 0.02, 'camera': 0.01, 'ceiling_fan': 0.0025, 'metronome': 0.04, 'headphone': 0.0625, 'watch': 0.0375, 'Faces': 0.465, 'stapler': 0.0225, 'schooner': 0.0025, 'brontosaurus': 0.01, 'car_side': 0.005, 'pigeon': 0.0075, 'wild_cat': 0.015, 'electric_guitar': 0.0025, 'Leopards': 0.0675, 'sea_horse': 0.0075, 'Faces_easy': 0.042499999999999996, 'helicopter': 0.0125, 'lamp': 0.0125, 'bass': 0.0025, 'gramophone': 0.0075, 'yin_yang': 0.5900000000000001, 'umbrella': 0.0375, 'flamingo': 0.01}
plus_multi_add = {'cellphone': 0.0125, 'ibis': 0.0075, 'crayfish': 0.0125, 'chandelier': 0.025, 'saxophone': 0.015, 'barrel': 0.01, 'dalmatian': 0.0125, 'stegosaurus': 0.0025, 'water_lilly': 0.0125, 'crab': 0.017499999999999998, 'wrench': 0.042499999999999996, 'joshua_tree': 0.0025, 'accordion': 0.045, 'mayfly': 0.0025, 'nautilus': 0.017499999999999998, 'menorah': 0.0675, 'mandolin': 0.01, 'scorpion': 0.0075, 'scissors': 0.005, 'gerenuk': 0.0125, 'flamingo_head': 0.0025, 'airplanes': 0.10500000000000001, 'inline_skate': 0.0075, 'butterfly': 0.0125, 'garfield': 0.0675, 'strawberry': 0.005, 'panda': 0.0325, 'windsor_chair': 0.042499999999999996, 'starfish': 0.02, 'revolver': 0.027500000000000004, 'dollar_bill': 0.015, 'okapi': 0.0075, 'hedgehog': 0.01, 'elephant': 0.005, 'sunflower': 0.025, 'lobster': 0.005, 'binocular': 0.0025, 'cannon': 0.005, 'grand_piano': 0.0725, 'snoopy': 0.034999999999999996, 'rhino': 0.0075, 'emu': 0.0, 'cougar_body': 0.0, 'pyramid': 0.01, 'cougar_face': 0.0025, 'beaver': 0.015, 'kangaroo': 0.0025, 'crocodile': 0.0, 'pizza': 0.02, 'platypus': 0.0, 'laptop': 0.02, 'brain': 0.0675, 'stop_sign': 0.1075, 'octopus': 0.09, 'wheelchair': 0.015, 'Motorbikes': 0.0225, 'tick': 0.0625, 'pagoda': 0.0125, 'lotus': 0.01, 'buddha': 0.0225, 'dragonfly': 0.01, 'anchor': 0.017499999999999998, 'rooster': 0.025, 'minaret': 0.0225, 'hawksbill': 0.015, 'ferry': 0.01, 'dolphin': 0.005, 'chair': 0.0125, 'ketch': 0.017499999999999998, 'euphonium': 0.0125, 'bonsai': 0.03, 'llama': 0.0075, 'soccer_ball': 0.2925, 'cup': 0.0075, 'ant': 0.0, 'ewer': 0.0075, 'crocodile_head': 0.02, 'trilobite': 0.015, 'camera': 0.005, 'ceiling_fan': 0.0, 'metronome': 0.015, 'headphone': 0.0925, 'watch': 0.0625, 'Faces': 0.5025000000000001, 'stapler': 0.01, 'schooner': 0.0075, 'brontosaurus': 0.005, 'car_side': 0.005, 'pigeon': 0.017499999999999998, 'wild_cat': 0.01, 'electric_guitar': 0.0025, 'Leopards': 0.0325, 'sea_horse': 0.005, 'Faces_easy': 0.06999999999999999, 'helicopter': 0.027500000000000004, 'lamp': 0.005, 'bass': 0.01, 'gramophone': 0.0075, 'yin_yang': 0.79, 'umbrella': 0.057499999999999996, 'flamingo': 0.02}
plus_multi_amin = {'cellphone': 0.0025, 'ibis': 0.0025, 'crayfish': 0.0025, 'chandelier': 0.03, 'saxophone': 0.005, 'barrel': 0.0125, 'dalmatian': 0.015, 'stegosaurus': 0.005, 'water_lilly': 0.0075, 'crab': 0.01, 'wrench': 0.025, 'joshua_tree': 0.017499999999999998, 'accordion': 0.04, 'mayfly': 0.0025, 'nautilus': 0.0225, 'menorah': 0.0875, 'mandolin': 0.0075, 'scorpion': 0.0125, 'scissors': 0.0075, 'gerenuk': 0.015, 'flamingo_head': 0.0025, 'airplanes': 0.095, 'inline_skate': 0.02, 'butterfly': 0.017499999999999998, 'garfield': 0.06, 'strawberry': 0.005, 'panda': 0.025, 'windsor_chair': 0.03, 'starfish': 0.01, 'revolver': 0.0025, 'dollar_bill': 0.0225, 'okapi': 0.0075, 'hedgehog': 0.03, 'elephant': 0.005, 'sunflower': 0.0225, 'lobster': 0.0, 'binocular': 0.005, 'cannon': 0.0, 'grand_piano': 0.0325, 'snoopy': 0.0675, 'rhino': 0.0, 'emu': 0.01, 'cougar_body': 0.0, 'pyramid': 0.01, 'cougar_face': 0.0, 'beaver': 0.0075, 'kangaroo': 0.005, 'crocodile': 0.005, 'pizza': 0.0475, 'platypus': 0.0025, 'laptop': 0.015, 'brain': 0.075, 'stop_sign': 0.04, 'octopus': 0.08, 'wheelchair': 0.0325, 'Motorbikes': 0.052500000000000005, 'tick': 0.027500000000000004, 'pagoda': 0.01, 'lotus': 0.0025, 'buddha': 0.0075, 'dragonfly': 0.015, 'anchor': 0.015, 'rooster': 0.02, 'minaret': 0.015, 'hawksbill': 0.0125, 'ferry': 0.017499999999999998, 'dolphin': 0.0125, 'chair': 0.0075, 'ketch': 0.0125, 'euphonium': 0.0025, 'bonsai': 0.03, 'llama': 0.0075, 'soccer_ball': 0.195, 'cup': 0.01, 'ant': 0.0025, 'ewer': 0.015, 'crocodile_head': 0.0075, 'trilobite': 0.025, 'camera': 0.0075, 'ceiling_fan': 0.005, 'metronome': 0.0075, 'headphone': 0.0625, 'watch': 0.04, 'Faces': 0.515, 'stapler': 0.0075, 'schooner': 0.005, 'brontosaurus': 0.0, 'car_side': 0.0025, 'pigeon': 0.0025, 'wild_cat': 0.017499999999999998, 'electric_guitar': 0.005, 'Leopards': 0.05500000000000001, 'sea_horse': 0.005, 'Faces_easy': 0.05500000000000001, 'helicopter': 0.01, 'lamp': 0.005, 'bass': 0.005, 'gramophone': 0.0025, 'yin_yang': 0.41500000000000004, 'umbrella': 0.04, 'flamingo': 0.005}
plus_multi_amax = {'cellphone': 0.0075, 'ibis': 0.0025, 'crayfish': 0.005, 'chandelier': 0.0125, 'saxophone': 0.005, 'barrel': 0.005, 'dalmatian': 0.0025, 'stegosaurus': 0.0075, 'water_lilly': 0.01, 'crab': 0.0125, 'wrench': 0.03, 'joshua_tree': 0.005, 'accordion': 0.05500000000000001, 'mayfly': 0.0075, 'nautilus': 0.025, 'menorah': 0.11750000000000001, 'mandolin': 0.01, 'scorpion': 0.017499999999999998, 'scissors': 0.0075, 'gerenuk': 0.0125, 'flamingo_head': 0.0075, 'airplanes': 0.11499999999999999, 'inline_skate': 0.005, 'butterfly': 0.02, 'garfield': 0.0675, 'strawberry': 0.0125, 'panda': 0.0325, 'windsor_chair': 0.0375, 'starfish': 0.015, 'revolver': 0.015, 'dollar_bill': 0.0075, 'okapi': 0.0025, 'hedgehog': 0.025, 'elephant': 0.0025, 'sunflower': 0.005, 'lobster': 0.0025, 'binocular': 0.005, 'cannon': 0.0, 'grand_piano': 0.05, 'snoopy': 0.0625, 'rhino': 0.0125, 'emu': 0.015, 'cougar_body': 0.0075, 'pyramid': 0.013157894736842105, 'cougar_face': 0.0025, 'beaver': 0.015, 'kangaroo': 0.0, 'crocodile': 0.0075, 'pizza': 0.05, 'platypus': 0.0025, 'laptop': 0.025, 'brain': 0.1025, 'stop_sign': 0.08, 'octopus': 0.0875, 'wheelchair': 0.042499999999999996, 'Motorbikes': 0.01, 'tick': 0.052500000000000005, 'pagoda': 0.0125, 'lotus': 0.0075, 'buddha': 0.025, 'dragonfly': 0.017499999999999998, 'anchor': 0.017499999999999998, 'rooster': 0.03, 'minaret': 0.017499999999999998, 'hawksbill': 0.0025, 'ferry': 0.0075, 'dolphin': 0.0125, 'chair': 0.0025, 'ketch': 0.005, 'euphonium': 0.005, 'bonsai': 0.0375, 'llama': 0.0075, 'soccer_ball': 0.22749999999999998, 'cup': 0.0025, 'ant': 0.0075, 'ewer': 0.01, 'crocodile_head': 0.017499999999999998, 'trilobite': 0.025, 'camera': 0.0025, 'ceiling_fan': 0.0, 'metronome': 0.01, 'headphone': 0.0925, 'watch': 0.04, 'Faces': 0.48, 'stapler': 0.0225, 'schooner': 0.0075, 'brontosaurus': 0.0075, 'car_side': 0.0, 'pigeon': 0.0125, 'wild_cat': 0.01, 'electric_guitar': 0.0, 'Leopards': 0.05, 'sea_horse': 0.0, 'Faces_easy': 0.052500000000000005, 'helicopter': 0.01, 'lamp': 0.01, 'bass': 0.0075, 'gramophone': 0.0075, 'yin_yang': 0.5900000000000001, 'umbrella': 0.034999999999999996, 'flamingo': 0.01}
sklearn = {'cellphone': 0.0475, 'ibis': 0.03, 'crayfish': 0.034999999999999996, 'chandelier': 0.075, 'saxophone': 0.0975, 'barrel': 0.0125, 'dalmatian': 0.042499999999999996, 'stegosaurus': 0.0475, 'water_lilly': 0.0625, 'crab': 0.02, 'wrench': 0.045, 'joshua_tree': 0.045, 'accordion': 0.095, 'mayfly': 0.025, 'nautilus': 0.04, 'menorah': 0.34249999999999997, 'mandolin': 0.052500000000000005, 'scorpion': 0.045, 'scissors': 0.1625, 'gerenuk': 0.015, 'flamingo_head': 0.0325, 'airplanes': 0.35750000000000004, 'inline_skate': 0.05500000000000001, 'butterfly': 0.052500000000000005, 'garfield': 0.2225, 'strawberry': 0.05, 'panda': 0.10500000000000001, 'windsor_chair': 0.3675, 'starfish': 0.10500000000000001, 'revolver': 0.09, 'dollar_bill': 0.08249999999999999, 'okapi': 0.02, 'hedgehog': 0.025, 'elephant': 0.01, 'sunflower': 0.25, 'lobster': 0.015, 'binocular': 0.015, 'cannon': 0.0075, 'grand_piano': 0.11000000000000001, 'snoopy': 0.20249999999999999, 'rhino': 0.0075, 'emu': 0.02, 'cougar_body': 0.03, 'pyramid': 0.031578947368421054, 'cougar_face': 0.04, 'beaver': 0.0075, 'kangaroo': 0.025, 'crocodile': 0.015, 'pizza': 0.1975, 'platypus': 0.04, 'laptop': 0.04, 'brain': 0.315, 'stop_sign': 0.4925, 'octopus': 0.08, 'wheelchair': 0.015, 'Motorbikes': 0.47000000000000003, 'tick': 0.24, 'pagoda': 0.10500000000000001, 'lotus': 0.05500000000000001, 'buddha': 0.0225, 'dragonfly': 0.095, 'anchor': 0.03, 'rooster': 0.075, 'minaret': 0.1375, 'hawksbill': 0.057499999999999996, 'ferry': 0.015, 'dolphin': 0.04473684210526316, 'chair': 0.02, 'ketch': 0.034999999999999996, 'euphonium': 0.034999999999999996, 'bonsai': 0.145, 'llama': 0.02, 'soccer_ball': 0.49749999999999994, 'cup': 0.01, 'ant': 0.042499999999999996, 'ewer': 0.0225, 'crocodile_head': 0.0125, 'trilobite': 0.13, 'camera': 0.05500000000000001, 'ceiling_fan': 0.02, 'metronome': 0.05500000000000001, 'headphone': 0.11000000000000001, 'watch': 0.13, 'Faces': 0.515, 'stapler': 0.01, 'schooner': 0.025, 'brontosaurus': 0.034999999999999996, 'car_side': 0.05500000000000001, 'pigeon': 0.027500000000000004, 'wild_cat': 0.0325, 'electric_guitar': 0.0475, 'Leopards': 0.11000000000000001, 'sea_horse': 0.027500000000000004, 'Faces_easy': 0.47000000000000003, 'helicopter': 0.015, 'lamp': 0.02, 'bass': 0.0125, 'gramophone': 0.025, 'yin_yang': 0.65, 'umbrella': 0.027500000000000004, 'flamingo': 0.0125}
sklearn_multi_add = {'cellphone': 0.0475, 'ibis': 0.017499999999999998, 'crayfish': 0.034999999999999996, 'chandelier': 0.12, 'saxophone': 0.0875, 'barrel': 0.01, 'dalmatian': 0.05, 'stegosaurus': 0.06, 'water_lilly': 0.08249999999999999, 'crab': 0.02, 'wrench': 0.065, 'joshua_tree': 0.0975, 'accordion': 0.075, 'mayfly': 0.027500000000000004, 'nautilus': 0.06999999999999999, 'menorah': 0.485, 'mandolin': 0.0475, 'scorpion': 0.06, 'scissors': 0.1825, 'gerenuk': 0.02, 'flamingo_head': 0.045, 'airplanes': 0.3675, 'inline_skate': 0.0625, 'butterfly': 0.052500000000000005, 'garfield': 0.3225, 'strawberry': 0.0675, 'panda': 0.13, 'windsor_chair': 0.47750000000000004, 'starfish': 0.1325, 'revolver': 0.065, 'dollar_bill': 0.1075, 'okapi': 0.03, 'hedgehog': 0.075, 'elephant': 0.017499999999999998, 'sunflower': 0.2475, 'lobster': 0.015, 'binocular': 0.03, 'cannon': 0.0125, 'grand_piano': 0.27, 'snoopy': 0.29, 'rhino': 0.0125, 'emu': 0.02, 'cougar_body': 0.042499999999999996, 'pyramid': 0.031578947368421054, 'cougar_face': 0.05, 'beaver': 0.0075, 'kangaroo': 0.0325, 'crocodile': 0.01, 'pizza': 0.265, 'platypus': 0.0325, 'laptop': 0.027500000000000004, 'brain': 0.40750000000000003, 'stop_sign': 0.5599999999999999, 'octopus': 0.11000000000000001, 'wheelchair': 0.04, 'Motorbikes': 0.6950000000000001, 'tick': 0.39, 'pagoda': 0.11499999999999999, 'lotus': 0.04, 'buddha': 0.0375, 'dragonfly': 0.125, 'anchor': 0.05, 'rooster': 0.09, 'minaret': 0.12250000000000001, 'hawksbill': 0.08249999999999999, 'ferry': 0.017499999999999998, 'dolphin': 0.0325, 'chair': 0.01, 'ketch': 0.02, 'euphonium': 0.0375, 'bonsai': 0.21000000000000002, 'llama': 0.0075, 'soccer_ball': 0.6725, 'cup': 0.0075, 'ant': 0.065, 'ewer': 0.027500000000000004, 'crocodile_head': 0.03, 'trilobite': 0.11499999999999999, 'camera': 0.027500000000000004, 'ceiling_fan': 0.02, 'metronome': 0.0875, 'headphone': 0.1975, 'watch': 0.0975, 'Faces': 0.635, 'stapler': 0.02, 'schooner': 0.0325, 'brontosaurus': 0.03, 'car_side': 0.08499999999999999, 'pigeon': 0.01, 'wild_cat': 0.04, 'electric_guitar': 0.04, 'Leopards': 0.18, 'sea_horse': 0.0325, 'Faces_easy': 0.47000000000000003, 'helicopter': 0.027500000000000004, 'lamp': 0.015, 'bass': 0.02, 'gramophone': 0.0225, 'yin_yang': 0.8675, 'umbrella': 0.0375, 'flamingo': 0.025}

assert plus.keys() == plus_multi_add.keys() == plus_multi_amin.keys() == plus_multi_amax.keys() == sklearn.keys() == sklearn.keys()

labels = plus.keys()
labels = list(labels)[51:]
for i in range(len(labels)):
    if "_" in labels[i]:
        labels[i] = labels[i].split("_")[0] + "\n" + labels[i].split("_")[1]

plus_val = np.array(list(plus.values()))[51:] *100
plus_multi_add_val = np.array(list(plus_multi_add.values()))[51:] *100
plus_multi_amin_val = np.array(list(plus_multi_amin.values()))[51:] *100
plus_multi_amax_val = np.array(list(plus_multi_amax.values()))[51:] *100
sklearn_val = np.array(list(sklearn.values()))[51:] *100
sklearn_multi_add_val = np.array(list(sklearn_multi_add.values()))[51:] *100
"""
fig = plt.figure(figsize=(40,60))
ax = fig.add_subplot(1,1,1)

ax.bar(keys, plus_val, align="edge", width=0.2)
ax.bar(keys, plus_multi_add_val, align="edge", width=0.2)
ax.bar(keys, plus_multi_amin_val, align="edge", width=0.2)

fig.savefig("result.png")
"""
# 棒の配置位置、ラベルを用意
x = np.array([x for x in range(1, len(labels)+1)])

# data
data = [plus_val, plus_multi_add_val, plus_multi_amin_val, plus_multi_amax_val, sklearn_val, sklearn_multi_add_val]
label = ["original k-means++", "multi query (add)", "multi query (min)", "multi query (max)", "sklearn", "sklearn + multi query (add)"]
colors = ["blue", "orange", "green", "slategray", "red", "purple"]

# マージンを設定
margin = 0.3  #0 <margin< 1
totoal_width = 1 - margin
 
plt.figure(figsize=(60,12))

# 棒グラフをプロット
for i, h in enumerate(data):
  pos = x - totoal_width *( 1- (2*i+1)/len(data) )/2
  plt.bar(pos, h, width = totoal_width/len(data), label=label[i], color=colors[i])
 
# ラベルの設定
plt.xticks(fontsize=12)
plt.xticks(x, labels)
plt.yticks(fontsize=20)
plt.xlabel("category", fontsize=20)
plt.ylabel("accuracy [%]", fontsize=20)
plt.legend(fontsize=20)
plt.savefig("result.png")
print("figure saved")

add = plus_multi_add_val - plus_val
amin = plus_multi_amin_val - plus_val
amax = plus_multi_amax_val - plus_val
sklearn = sklearn_multi_add_val - sklearn_val

print("add: ", len(add[add>0.]), "/", len(add), " ", add.sum())
print("amin: ", len(amin[amin>0.]), "/", len(amin), " ", amin.sum())
print("amax: ", len(amax[amax>0.]), "/", len(amax), " ", amin.sum())
print("sklearn add: ", len(sklearn[sklearn>0.]), "/", len(sklearn), " ", sklearn.sum())
